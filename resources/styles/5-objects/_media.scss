// Make the media object work in conjunction with the format object
@use 'sass:selector';

.media {
  --media-position: center;
  --media-height: auto;
  --media-width: 100%;
  --media-fit: fill;

  &.--vertical {
    --media-height: 100%;
    --media-width: auto;
  }

  // Make the media object work in conjunction with the format object
  .format > &,
  &.format,
  &.--cover {
    --media-fit: cover;
  }

  &.--contain {
    --media-fit: contain;
  }

  // Make the media object work in conjunction with the format object
  .format > &,
  &.format,
  &.--contain,
  &.--cover {
    --media-height: 100%;
    --media-width: 100%;
  }
}

.media {
  // A possible fallback solution for images and object-fit
  // background-position: var(--media-position);
  // background-repeat: no-repeat;
  // background-image: var(--media-source);
  // background-size: var(--media-fit);

  height: var(--media-height);
  width: var(--media-width);

  picture,
  canvas,
  video,
  img {
    object-position: var(--media-position);
    object-fit: var(--media-fit);
    max-height: 100%;
	  max-width: 100%;
    display: block;
    height: var(--media-height);
    width: var(--media-width);

    // Make the media object work in conjunction with the format object
    @at-root {
      #{selector.append('.format', &)},
      #{selector.nest('.format', &)} {
        position: absolute;
        left: 0;
        top: 0;
      }
    }
  }
}
